(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c1ad972"],{"1dde":function(e,t,c){var a=c("d039"),o=c("b622"),r=c("2d00"),n=o("species");e.exports=function(e){return r>=51||!a((function(){var t=[],c=t.constructor={};return c[n]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},8418:function(e,t,c){"use strict";var a=c("c04e"),o=c("9bf2"),r=c("5c6c");e.exports=function(e,t,c){var n=a(t);n in e?o.f(e,n,r(0,c)):e[n]=c}},"99af":function(e,t,c){"use strict";var a=c("23e7"),o=c("d039"),r=c("e8b5"),n=c("861d"),l=c("7b0b"),s=c("50c4"),d=c("8418"),i=c("65f0"),u=c("1dde"),b=c("b622"),m=c("2d00"),f=b("isConcatSpreadable"),p=9007199254740991,O="Maximum allowed index exceeded",j=m>=51||!o((function(){var e=[];return e[f]=!1,e.concat()[0]!==e})),h=u("concat"),V=function(e){if(!n(e))return!1;var t=e[f];return void 0!==t?!!t:r(e)},v=!j||!h;a({target:"Array",proto:!0,forced:v},{concat:function(e){var t,c,a,o,r,n=l(this),u=i(n,0),b=0;for(t=-1,a=arguments.length;t<a;t++)if(r=-1===t?n:arguments[t],V(r)){if(o=s(r.length),b+o>p)throw TypeError(O);for(c=0;c<o;c++,b++)c in r&&d(u,b,r[c])}else{if(b>=p)throw TypeError(O);d(u,b++,r)}return u.length=b,u}})},b0c0:function(e,t,c){var a=c("83ab"),o=c("9bf2").f,r=Function.prototype,n=r.toString,l=/^\s*function ([^ (]*)/,s="name";a&&!(s in r)&&o(r,s,{configurable:!0,get:function(){try{return n.call(this).match(l)[1]}catch(e){return""}}})},b789:function(e,t,c){"use strict";c.r(t);c("b0c0");var a=c("7a23"),o={class:"container"},r={class:"text-end"},n={key:0,class:"spinner-grow spinner-grow-sm",role:"status"},l=Object(a["createTextVNode"])(" 清空購物車 "),s={class:"table align-middle"},d=Object(a["createVNode"])("thead",null,[Object(a["createVNode"])("tr",null,[Object(a["createVNode"])("th"),Object(a["createVNode"])("th",null,"品名"),Object(a["createVNode"])("th",{style:{width:"150px"}},"數量/單位"),Object(a["createVNode"])("th",null,"金額")])],-1),i={key:0,class:"spinner-grow spinner-grow-sm",role:"status"},u=Object(a["createTextVNode"])(" x "),b={class:"input-group input-group-sm"},m={class:"input-group mb-3"},f={class:"input-group-text",id:"basic-addon2"},p={key:1},O=Object(a["createVNode"])("td",{colspan:"4",class:"text-center"},"購物車內無品項",-1),j=Object(a["createVNode"])("td",{colspan:"3",class:"text-end"},"總計",-1),h={key:0},V=Object(a["createVNode"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),v={class:"text-success"},g={class:"my-5 row justify-content-center"},N={class:"mb-3"},y=Object(a["createVNode"])("label",{for:"name",class:"form-lable"},"姓名",-1),k={class:"mb-3"},x=Object(a["createVNode"])("label",{for:"email",class:"form-lable"},"Email",-1),C={class:"mb-3"},w=Object(a["createVNode"])("label",{for:"tel",class:"form-lable"},"電話",-1),B={class:"mb-3"},I=Object(a["createVNode"])("label",{for:"address",class:"form-lable"},"地址",-1),S={class:"mb-3"},q=Object(a["createVNode"])("label",{for:"message",class:"form-label"},"留言",-1),A={class:"text-end"};function D(e,t,c,D,T,U){var $=Object(a["resolveComponent"])("Loading"),L=Object(a["resolveComponent"])("Field"),F=Object(a["resolveComponent"])("error-message"),_=Object(a["resolveComponent"])("Form");return Object(a["openBlock"])(),Object(a["createBlock"])(a["Fragment"],null,[Object(a["createVNode"])($,{active:T.isLoading},null,8,["active"]),Object(a["createVNode"])("div",o,[Object(a["createVNode"])("div",r,[Object(a["createVNode"])("button",{class:"btn btn-outline-danger",type:"button",onClick:t[1]||(t[1]=function(){return U.deleteAllCart&&U.deleteAllCart.apply(U,arguments)}),disabled:0===T.cart.carts.length||"deleteAll"===T.cartId},["deleteAll"===T.cartId?(Object(a["openBlock"])(),Object(a["createBlock"])("i",n)):Object(a["createCommentVNode"])("",!0),l],8,["disabled"])]),Object(a["createVNode"])("table",s,[d,Object(a["createVNode"])("tbody",null,[T.cart.carts.length>0?(Object(a["openBlock"])(!0),Object(a["createBlock"])(a["Fragment"],{key:0},Object(a["renderList"])(T.cart.carts,(function(e){return Object(a["openBlock"])(),Object(a["createBlock"])("tr",{key:e.id},[Object(a["createVNode"])("td",null,[Object(a["createVNode"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(t){return U.deleteCart(e)},disabled:T.cartId===e.id},[T.cartId===e.id?(Object(a["openBlock"])(),Object(a["createBlock"])("i",i)):Object(a["createCommentVNode"])("",!0),u],8,["onClick","disabled"])]),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.product.title),1),Object(a["createVNode"])("td",null,[Object(a["createVNode"])("div",b,[Object(a["createVNode"])("div",m,[Object(a["withDirectives"])(Object(a["createVNode"])("input",{"onUpdate:modelValue":function(t){return e.qty=t},onChange:function(t){return U.updateCart(e)},disabled:T.cartId===e.id,min:"1",type:"number",class:"form-control"},null,40,["onUpdate:modelValue","onChange","disabled"]),[[a["vModelText"],e.qty,void 0,{number:!0}]]),Object(a["createVNode"])("span",f,Object(a["toDisplayString"])(e.product.unit),1)])])]),Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(e.final_total),1)])})),128)):(Object(a["openBlock"])(),Object(a["createBlock"])("tr",p,[O]))]),Object(a["createVNode"])("tfoot",null,[Object(a["createVNode"])("tr",null,[j,Object(a["createVNode"])("td",null,Object(a["toDisplayString"])(T.cart.total),1)]),T.cart.final_total!==T.cart.total?(Object(a["openBlock"])(),Object(a["createBlock"])("tr",h,[V,Object(a["createVNode"])("td",v,Object(a["toDisplayString"])(T.cart.final_total),1)])):Object(a["createCommentVNode"])("",!0)])]),Object(a["createVNode"])("div",g,[Object(a["createVNode"])(_,{onSubmit:U.createOrder,class:"col-md-6"},{default:Object(a["withCtx"])((function(e){var c=e.errors;return[Object(a["createVNode"])("div",N,[y,Object(a["createVNode"])(L,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":c["姓名"]}],placeholder:"請輸入 姓名",rules:"required",modelValue:T.form.user.name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return T.form.user.name=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(F,{name:"姓名",class:"invalid-feedback"})]),Object(a["createVNode"])("div",k,[x,Object(a["createVNode"])(L,{id:"email",name:"email",type:"email",class:["form-control",{"is-invalid":c["email"]}],placeholder:"請輸入 Email",rules:"email|required",modelValue:T.form.user.email,"onUpdate:modelValue":t[3]||(t[3]=function(e){return T.form.user.email=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(F,{name:"email",class:"invalid-feedback"})]),Object(a["createVNode"])("div",C,[w,Object(a["createVNode"])(L,{id:"tel",name:"電話",type:"tel",class:["form-control",{"is-invalid":c["電話"]}],placeholder:"請輸入 電話",rules:U.isPhone,modelValue:T.form.user.tel,"onUpdate:modelValue":t[4]||(t[4]=function(e){return T.form.user.tel=e})},null,8,["class","rules","modelValue"]),Object(a["createVNode"])(F,{name:"電話",class:"invalid-feedback"})]),Object(a["createVNode"])("div",B,[I,Object(a["createVNode"])(L,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":c["地址"]}],placeholder:"請輸入 地址",rules:"required",modelValue:T.form.user.address,"onUpdate:modelValue":t[5]||(t[5]=function(e){return T.form.user.address=e})},null,8,["class","modelValue"]),Object(a["createVNode"])(F,{name:"地址",class:"invalid-feedback"})]),Object(a["createVNode"])("div",S,[q,Object(a["withDirectives"])(Object(a["createVNode"])("textarea",{name:"message",id:"message",class:"form-control",cols:"30",rows:"10","onUpdate:modelValue":t[6]||(t[6]=function(e){return T.form.message=e})},null,512),[[a["vModelText"],T.form.message]])]),Object(a["createVNode"])("div",A,[Object(a["createVNode"])("button",{type:"submit",class:"btn btn-primary",disabled:0===T.cart.carts.length}," 送出訂單 ",8,["disabled"])])]})),_:1},8,["onSubmit"])])])],64)}c("99af");var T=c("1940"),U=c.n(T),$={data:function(){return{cart:{carts:[]},isLoading:!1,cartId:"",form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{getCart:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("fred8196","/cart");this.$http.get(t).then((function(t){t.data.success&&(e.cart=t.data.data,e.isLoading=!1)})).catch((function(e){console.log(e)}))},deleteCart:function(e){var t=this;this.cartId=e.id;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("fred8196","/cart/").concat(e.id);this.$http.delete(c).then((function(c){c.data.success&&(U()(e.product.title+c.data.message),t.getCart(),t.cartId="")})).catch((function(e){console.log(e)}))},updateCart:function(e){var t=this;this.cartId=e.id;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("fred8196","/cart/").concat(e.id);this.$http.put(c,{data:{product_id:e.product.id,qty:e.qty}}).then((function(e){t.getCart(),t.cartId=""}))},deleteAllCart:function(){var e=this;this.cartId="deleteAll";var t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("fred8196","/carts");this.$http.delete(t).then((function(t){t.data.success&&(console.log(t),e.getCart(),e.cartId="")}))},createOrder:function(){var e=this;if(0!==this.cart.carts.length){var t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("fred8196","/order");this.$http.post(t,{data:this.form}).then((function(t){t.data.success&&(console.log(t),e.getCart(),U()({title:t.data.message,icon:"success",button:!1,timer:1e3}),setTimeout((function(){e.$router.push("/products")}),1e3))})).catch((function(e){console.log(e)}))}else U()({title:"請加入品項至購物車",icon:"error",button:!1,timer:1e3})},isPhone:function(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"電話號碼 需為10碼數字並以09開頭"}},mounted:function(){this.getCart()}};$.render=D;t["default"]=$}}]);
//# sourceMappingURL=chunk-0c1ad972.9d2b8164.js.map